<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resume Customizer</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      background-color: #f5f5f5;
      color: #333;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
    }
    .card {
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 25px;
      margin-bottom: 20px;
      background-color: white;
    }
    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 10px;
    }
    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
    }
    .upload-area {
      border: 2px dashed #ddd;
      border-radius: 5px;
      padding: 30px;
      text-align: center;
      margin-bottom: 15px;
      background-color: #f9f9f9;
      cursor: pointer;
    }
    .upload-icon {
      font-size: 40px;
      color: #ccc;
      margin-bottom: 10px;
    }
    .debug-console {
      font-family: monospace;
      background-color: #f0f0f0;
      padding: 15px;
      border-radius: 5px;
      height: 300px;
      overflow-y: auto;
      margin-top: 15px;
    }
    .console-line {
      margin: 0;
      padding: 2px 0;
    }
    .console-time {
      color: #666;
    }
    .console-info {
      color: #0066cc;
    }
    .console-error {
      color: #cc0000;
    }
    .console-success {
      color: #00aa00;
    }
    .upload-button {
      display: inline-block;
      cursor: pointer;
      color: #4169e1;
      text-decoration: underline;
    }
    .selected-file {
      margin-top: 10px;
      font-style: italic;
    }
    .customize-button {
      background-color: #4169e1;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 5px;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .customize-button:hover {
      background-color: #3253c1;
    }
    .json {
      color: #333;
    }
    .json-key {
      color: #0d6efd;
    }
    .json-string {
      color: #198754;
    }
    .json-number {
      color: #fd7e14;
    }
    .download-button {
      display: inline-block;
      margin-top: 20px;
      background-color: #28a745;
      color: white;
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 5px;
      font-weight: bold;
      text-align: center;
      transition: background-color 0.3s;
    }
    .download-button:hover {
      background-color: #218838;
      text-decoration: none;
      color: white;
    }
    #downloadContainer {
      text-align: center;
      margin-top: 20px;
      display: none;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Resume Customizer</h1>
    <p class="subtitle">Upload your resume and we'll tailor it for your target job</p>
    
    <div class="card">
      <div class="mb-3">
        <label for="apiKey" class="form-label">API Key</label>
        <input type="text" class="form-control" id="apiKey" value="demo-api-key-55902034-f169-4a9d-a4a1-c205a96ba56f">
        <div class="form-text">Demo key is pre-filled for testing</div>
      </div>
      
      <div class="mb-3">
        <label class="form-label">Resume (PDF format)</label>
        <div class="upload-area" id="uploadArea">
          <div class="upload-icon">ðŸ“„</div>
          <span class="upload-button" id="uploadButton">Upload a file</span> or drag and drop
          <div class="mt-2 text-muted">PDF up to 10MB</div>
          <input type="file" id="resumeFile" accept=".pdf" style="display: none;">
        </div>
        <div class="selected-file" id="selectedFile"></div>
      </div>
      
      <div class="mb-3">
        <label for="jobDescription" class="form-label">Job Description</label>
        <div class="text-end mb-1">
          <a href="#" id="loadSampleJob">Load sample job description</a>
        </div>
        <textarea class="form-control" id="jobDescription" rows="8" placeholder="Paste job description here..."></textarea>
      </div>
      
      <div class="mb-3">
        <label class="form-label">Formatting Options</label>
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="templateStyle" class="form-label">Template Style</label>
            <select class="form-select" id="templateStyle">
              <option value="modern">Modern</option>
              <option value="classic">Classic</option>
              <option value="professional">Professional</option>
              <option value="creative">Creative</option>
            </select>
          </div>
          <div class="col-md-6 mb-3">
            <label for="primaryColor" class="form-label">Primary Color</label>
            <input type="color" class="form-control form-control-color w-100" id="primaryColor" value="#4169e1">
          </div>
        </div>
      </div>
      
      <div class="text-center">
        <button class="customize-button" id="customizeButton">Customize Resume</button>
      </div>
      
      <!-- Download container - initially hidden -->
      <div id="downloadContainer">
        <div class="alert alert-success" role="alert">
          <h4 class="alert-heading">Customization Complete!</h4>
          <p>Your resume has been customized to match the job description.</p>
        </div>
        <a href="#" class="download-button" id="downloadButton">
          <i class="fas fa-download"></i> Download Customized Resume
        </a>
      </div>
    </div>
    
    <div class="card">
      <h3>Debug Console</h3>
      <div class="debug-console" id="debugConsole"></div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Load jsPDF
      const { jsPDF } = window.jspdf;
      
      // References to DOM elements
      const apiKeyInput = document.getElementById('apiKey');
      const uploadArea = document.getElementById('uploadArea');
      const uploadButton = document.getElementById('uploadButton');
      const resumeFileInput = document.getElementById('resumeFile');
      const selectedFileDiv = document.getElementById('selectedFile');
      const jobDescriptionTextarea = document.getElementById('jobDescription');
      const loadSampleJobLink = document.getElementById('loadSampleJob');
      const templateStyleSelect = document.getElementById('templateStyle');
      const primaryColorInput = document.getElementById('primaryColor');
      const customizeButton = document.getElementById('customizeButton');
      const debugConsole = document.getElementById('debugConsole');
      const downloadContainer = document.getElementById('downloadContainer');
      const downloadButton = document.getElementById('downloadButton');
      
      // Track selected file and customized content
      let selectedFileObj = null;
      let customizedContent = null;
      let currentJobId = null;
      
      // Sample job description
      const sampleJobDescription = `Senior Software Engineering Manager

About Us:
We are a growing tech company building innovative solutions using cutting-edge technologies. Our engineering team is passionate about creating scalable, maintainable software that solves real-world problems.

Job Description:
We are looking for an experienced Engineering Manager to lead a team of talented software engineers. The ideal candidate will have a strong technical background, excellent leadership skills, and a track record of delivering high-quality software products.

Responsibilities:
â€¢ Lead and mentor a team of 5-8 software engineers
â€¢ Work closely with product managers to define and prioritize features
â€¢ Drive technical decision-making and architecture planning
â€¢ Establish engineering best practices and coding standards
â€¢ Ensure on-time delivery of high-quality software
â€¢ Conduct performance reviews and foster career growth for team members
â€¢ Participate in technical discussions and code reviews
â€¢ Collaborate with other engineering teams to ensure system integration

Requirements:
â€¢ 5+ years of experience in software engineering
â€¢ 3+ years of experience in a technical leadership role
â€¢ Strong programming skills in at least one modern language (Java, Python, Go, etc.)
â€¢ Experience with modern software development practices (Agile, CI/CD, TDD)
â€¢ Excellent communication and interpersonal skills
â€¢ Bachelor's degree in Computer Science or related field (or equivalent experience)
â€¢ Ability to balance technical leadership and people management responsibilities

Nice to Have:
â€¢ Experience with cloud platforms (AWS, GCP, Azure)
â€¢ Background in distributed systems and microservices architecture
â€¢ Experience with containerization technologies (Docker, Kubernetes)
â€¢ Previous experience in a fast-paced startup environment

Benefits:
â€¢ Competitive salary and equity package
â€¢ Health, dental, and vision insurance
â€¢ 401(k) matching
â€¢ Flexible working hours and remote work options
â€¢ Professional development budget
â€¢ Team events and company retreats`;
      
      // Display message in the debug console
      function logToConsole(message, type = 'info') {
        const now = new Date();
        const timeString = now.toLocaleTimeString();
        const logEntry = document.createElement('p');
        logEntry.className = 'console-line';
        
        if (message.startsWith('{') || message.startsWith('[')) {
          try {
            // Format JSON with syntax highlighting
            const jsonObj = JSON.parse(message);
            const formatted = formatJSON(jsonObj);
            logEntry.innerHTML = `<span class="console-time">[${timeString}]</span> <span class="console-${type}">${formatted}</span>`;
          } catch (e) {
            // If not valid JSON, display as plain text
            logEntry.innerHTML = `<span class="console-time">[${timeString}]</span> <span class="console-${type}">${message}</span>`;
          }
        } else {
          logEntry.innerHTML = `<span class="console-time">[${timeString}]</span> <span class="console-${type}">${message}</span>`;
        }
        
        debugConsole.appendChild(logEntry);
        debugConsole.scrollTop = debugConsole.scrollHeight;
      }
      
      // Format JSON with syntax highlighting
      function formatJSON(obj) {
        return JSON.stringify(obj, null, 2)
          .replace(/&/g, '&amp;')
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;')
          .replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
            let cls = 'json-number';
            if (/^"/.test(match)) {
              if (/:$/.test(match)) {
                cls = 'json-key';
                match = match.replace(/"(.*)":/g, '<b>"$1"</b>:');
              } else {
                cls = 'json-string';
              }
            } else if (/true|false/.test(match)) {
              cls = 'json-boolean';
            } else if (/null/.test(match)) {
              cls = 'json-null';
            }
            return '<span class="' + cls + '">' + match + '</span>';
          })
          .replace(/\n/g, '<br>')
          .replace(/\s{2}/g, '&nbsp;&nbsp;');
      }
      
      // Handle file upload button click
      uploadButton.addEventListener('click', function(e) {
        e.preventDefault();
        resumeFileInput.click();
      });
      
      // Handle file upload area click
      uploadArea.addEventListener('click', function(e) {
        if (e.target !== uploadButton) {
          resumeFileInput.click();
        }
      });
      
      // Handle file drag and drop
      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        uploadArea.addEventListener(eventName, preventDefaults, false);
      });
      
      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }
      
      ['dragenter', 'dragover'].forEach(eventName => {
        uploadArea.addEventListener(eventName, highlight, false);
      });
      
      ['dragleave', 'drop'].forEach(eventName => {
        uploadArea.addEventListener(eventName, unhighlight, false);
      });
      
      function highlight() {
        uploadArea.style.borderColor = '#4169e1';
        uploadArea.style.backgroundColor = '#f0f8ff';
      }
      
      function unhighlight() {
        uploadArea.style.borderColor = '#ddd';
        uploadArea.style.backgroundColor = '#f9f9f9';
      }
      
      // Handle file drop
      uploadArea.addEventListener('drop', function(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        
        if (files.length > 0) {
          handleFile(files[0]);
          
          // Set the file input value for form submission
          const dataTransfer = new DataTransfer();
          dataTransfer.items.add(files[0]);
          resumeFileInput.files = dataTransfer.files;
        }
      }, false);
      
      // Handle file input change
      resumeFileInput.addEventListener('change', function() {
        if (this.files.length > 0) {
          handleFile(this.files[0]);
        }
      });
      
      function handleFile(file) {
        selectedFileObj = file;
        
        if (file.type !== 'application/pdf') {
          logToConsole('Only PDF files are supported', 'error');
          return;
        }
        
        if (file.size > 10 * 1024 * 1024) { // 10MB
          logToConsole('File size exceeds 10MB limit', 'error');
          return;
        }
        
        selectedFileDiv.textContent = `Selected file: ${file.name}`;
        logToConsole(`File selected: ${file.name} (${formatFileSize(file.size)})`, 'info');
      }
      
      function formatFileSize(bytes) {
        if (bytes < 1024) {
          return bytes + ' bytes';
        } else if (bytes < 1024 * 1024) {
          return (bytes / 1024).toFixed(2) + ' KB';
        } else {
          return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
        }
      }
      
      // Load sample job description
      loadSampleJobLink.addEventListener('click', function(e) {
        e.preventDefault();
        jobDescriptionTextarea.value = sampleJobDescription;
        logToConsole('Sample job description loaded', 'info');
      });
      
      // Generate a unique filename
      function generateCustomizedFilename() {
        if (!selectedFileObj) return 'customized-resume.pdf';
        
        const originalName = selectedFileObj.name;
        const baseName = originalName.substring(0, originalName.lastIndexOf('.')) || originalName;
        return `${baseName}-customized.pdf`;
      }
      
      // Generate a simple PDF with the customized content
      function generatePDF() {
        // Create a new jsPDF instance
        const doc = new jsPDF();
        
        // Add content
        const filename = generateCustomizedFilename();
        const jobDesc = jobDescriptionTextarea.value.trim();
        
        // Add title
        doc.setFontSize(20);
        doc.setTextColor(65, 105, 225); // Royal Blue
        doc.text('CUSTOMIZED RESUME', 105, 20, { align: 'center' });
        
        // Add customized content
        doc.setFontSize(12);
        doc.setTextColor(0, 0, 0);
        
        // Get content from the mock customized resume
        const content = customizedContent || `
JOHN DOE
Senior Software Engineer
john.doe@example.com | (123) 456-7890

PROFESSIONAL SUMMARY
Experienced software engineer with 5+ years specializing in scalable web applications using JavaScript/TypeScript, React, and Node.js. Proven track record in implementing CI/CD pipelines, microservices architecture, and optimizing application performance. Passionate about clean, maintainable code and mentoring junior developers.

EXPERIENCE
Senior Software Engineer | Tech Company ABC
January 2020 - Present
â€¢ Architected and implemented microservices that improved system reliability by 35%, focusing on high-performance, reusable code
â€¢ Established CI/CD pipelines that reduced deployment time by 40%, demonstrating expertise in DevOps practices
â€¢ Identified and resolved performance bottlenecks across the application stack
â€¢ Mentored junior engineers and conducted code reviews, fostering best practices and code quality

Software Engineer | Startup XYZ
June 2017 - December 2019
â€¢ Developed a real-time analytics dashboard using React, enhancing the frontend user experience
â€¢ Built RESTful APIs with Node.js to support frontend functionality
â€¢ Optimized SQL and NoSQL database queries that improved application performance by 25%
â€¢ Collaborated with cross-functional teams to define, design, and ship new features

EDUCATION
Master of Science in Computer Science
University of Technology, 2017

Bachelor of Science in Computer Engineering
State University, 2015

TECHNICAL SKILLS
â€¢ Languages: JavaScript, TypeScript, Python, Java
â€¢ Frontend: React, Vue.js, Angular, HTML, CSS
â€¢ Backend: Node.js, Express, RESTful APIs, Django, Spring Boot
â€¢ Database: PostgreSQL, MongoDB, Redis, SQL/NoSQL systems
â€¢ Cloud & DevOps: AWS, Docker, Kubernetes, CI/CD pipelines`;
        
        // Split content into lines and add to PDF
        const lines = content.split('\n');
        let y = 30;
        const lineHeight = 7;
        
        for (const line of lines) {
          if (line.trim() === '') {
            y += lineHeight / 2;
            continue;
          }
          
          // Check if line is a heading (all caps)
          if (line.toUpperCase() === line && line.length > 2) {
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            y += lineHeight;
            doc.text(line, 20, y);
            y += lineHeight / 2;
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
          } else {
            // Check if it starts with a bullet point
            if (line.trim().startsWith('â€¢')) {
              doc.text(line, 25, y); // Indent bullet points
            } else {
              doc.text(line, 20, y);
            }
            y += lineHeight;
          }
          
          // Check if we need a new page
          if (y > 270) {
            doc.addPage();
            y = 20;
          }
        }
        
        // Add page numbers
        const totalPages = doc.getNumberOfPages();
        for (let i = 1; i <= totalPages; i++) {
          doc.setPage(i);
          doc.setFontSize(10);
          doc.text(`Page ${i} of ${totalPages}`, 195, 285, { align: 'right' });
        }
        
        return {
          filename,
          pdf: doc
        };
      }
      
      // Set up the download button with a real PDF
      function setupDownloadButton() {
        const { filename, pdf } = generatePDF();
        
        // Create the PDF download link
        const pdfOutput = pdf.output('datauristring');
        
        downloadButton.href = pdfOutput;
        downloadButton.download = filename;
        downloadButton.setAttribute('title', `Download ${filename}`);
        
        // Show the download section
        downloadContainer.style.display = 'block';
        
        // Scroll to download button
        downloadButton.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
      
      // Handle customize button click
      customizeButton.addEventListener('click', function() {
        // Hide download section if shown from previous run
        downloadContainer.style.display = 'none';
        
        // Validate inputs
        const apiKey = apiKeyInput.value.trim();
        const jobDescription = jobDescriptionTextarea.value.trim();
        
        if (!apiKey) {
          logToConsole('API Key is required', 'error');
          return;
        }
        
        if (!selectedFileObj) {
          logToConsole('Please upload a resume file', 'error');
          return;
        }
        
        if (!jobDescription) {
          logToConsole('Job description is required', 'error');
          return;
        }
        
        // Log customization request
        logToConsole('{"type": "application/pdf"}', 'info');
        logToConsole('Submitting resume to API... {', 'info');
        
        // Simulate API request
        setTimeout(() => {
          currentJobId = 'job-' + Math.random().toString(36).substr(2, 9);
          logToConsole(`  "jobId": "${currentJobId}",`, 'info');
          logToConsole('  "status": "pending"', 'info');
          logToConsole('}', 'info');
          
          // Simulate processing stages
          simulateProcessing(currentJobId);
        }, 500);
      });
      
      function simulateProcessing(jobId) {
        const stages = [
          { message: 'Parsing resume...', delay: 1000 },
          { message: 'Analyzing job description...', delay: 1500 },
          { message: 'Extracting key requirements...', delay: 2000 },
          { message: 'Generating professional profile...', delay: 2500 },
          { message: 'Customizing resume content...', delay: 3000 },
          { message: 'Formatting document...', delay: 1500 },
          { message: 'Optimization complete!', delay: 1000, type: 'success' }
        ];
        
        let currentStage = 0;
        
        function processNextStage() {
          if (currentStage < stages.length) {
            const stage = stages[currentStage];
            logToConsole(stage.message, stage.type || 'info');
            currentStage++;
            setTimeout(processNextStage, stage.delay);
          } else {
            // Generate mock customized content
            customizedContent = `
ANIKET GHODE
Senior Engineering Manager
aniket.ghode@example.com | (123) 456-7890

PROFESSIONAL SUMMARY
Results-driven Engineering Manager with 8+ years of software engineering experience and 4+ years in technical leadership. Proven track record of building and mentoring high-performing engineering teams while driving technical excellence and innovation. Strong expertise in modern development practices, cloud technologies, and distributed systems architecture.

EXPERIENCE
Engineering Manager | Current Company
January 2020 - Present
â€¢ Lead and mentor a team of 7 software engineers, fostering a culture of collaboration and technical excellence
â€¢ Implemented Agile development practices that increased team velocity by 35% and reduced delivery time by 40%
â€¢ Established engineering best practices and coding standards that improved code quality and system reliability
â€¢ Collaborated with product managers to define roadmaps and prioritize features based on business value
â€¢ Drove technical decision-making for microservices architecture migration, resulting in improved scalability

Senior Software Engineer | Previous Company
June 2017 - December 2019
â€¢ Led the development of cloud-native applications using AWS, Docker, and Kubernetes
â€¢ Designed and implemented CI/CD pipelines that reduced deployment time from days to hours
â€¢ Mentored junior engineers and conducted regular code reviews to maintain high quality standards
â€¢ Optimized database performance, resulting in a 45% improvement in query response times

EDUCATION
Master of Science in Computer Science
University of Technology, 2017

Bachelor of Science in Computer Engineering
State University, 2015

TECHNICAL SKILLS
â€¢ Leadership: Team mentoring, Performance reviews, Technical planning, Cross-team collaboration
â€¢ Development: Java, Python, Go, JavaScript/TypeScript, RESTful APIs
â€¢ Practices: Agile, CI/CD, TDD, Code reviews, System design
â€¢ Cloud & DevOps: AWS, GCP, Docker, Kubernetes, Microservices architecture
â€¢ Communication: Technical documentation, Stakeholder management, Presentations

ACHIEVEMENTS
â€¢ Reduced production incidents by 60% through implementation of improved testing strategies
â€¢ Successfully delivered 3 major platform initiatives ahead of schedule and under budget
â€¢ Received Engineering Excellence Award for leadership in cloud migration project
`;
            
            // Final success message
            setTimeout(() => {
              const downloadUrl = `https://api.example.com/download/${jobId}`;
              
              logToConsole('Resume customization completed successfully!', 'success');
              logToConsole(JSON.stringify({
                status: 'completed',
                jobId: jobId,
                downloadUrl: downloadUrl,
                matchScore: 87,
                keywordMatches: 18,
                improvementSuggestions: 3
              }), 'success');
              
              // Set up download button
              setupDownloadButton();
            }, 1000);
          }
        }
        
        // Start processing
        processNextStage();
      }
    });
  </script>
</body>
</html>
